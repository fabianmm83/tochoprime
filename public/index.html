<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
    <!-- ğŸ”¥ META TAGS CRÃTICOS PARA CONTROL DE CACHE -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="version" content="final-20260116_1342">
    
    <!-- ğŸ¦ ESPECÃFICO PARA SAFARI/IOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- ğŸ“± PWA -->
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="Sistema de gestiÃ³n de ligas Tocho Prime - AdministraciÃ³n de equipos, jugadores y partidos">
    
    <!-- ğŸš¨ ANTI-CACHE SCRIPT (se ejecuta antes de que cargue React) -->
    <script>
      // Bloquear Back-Forward Cache (bfcache)
      window.onpageshow = function(event) {
        if (event.persisted) {
          console.log('ğŸš¨ bfcache detectado - recargando...');
          window.location.reload();
        }
      };
      
      // Detectar si es Safari/iOS
      const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) || 
                      /iPad|iPhone|iPod/.test(navigator.userAgent);
      
      // Forzar limpieza de cache en Safari
      if (isSafari && 'caches' in window) {
        caches.keys().then(names => {
          names.forEach(name => {
            console.log('ğŸ—‘ï¸  Limpiando cache:', name);
            caches.delete(name);
          });
        });
      }
      
      // Agregar timestamp a la URL si no lo tiene
      if (!window.location.search.includes('v=') && !window.location.search.includes('t=')) {
        const newUrl = window.location.href + (window.location.href.includes('?') ? '&' : '?') + 't=' + Date.now();
        console.log('ğŸ• Agregando timestamp a URL:', newUrl);
        window.history.replaceState({}, '', newUrl);
      }
    </script>
    
    <title>Tocho Prime - GestiÃ³n de Ligas</title>
  </head>
  <body>
    <div id="root"></div>
    <!-- Los scripts se inyectarÃ¡n automÃ¡ticamente durante el build -->
    
    <!-- ğŸ“Š Script de analytics/errores -->
    <script>
      // Capturar errores globales
      window.addEventListener('error', function(e) {
        console.error('ğŸš¨ Error global:', e.error);
        // Opcional: enviar a servicio de monitoreo
      });
      
      // Mostrar info de carga
      console.log('ğŸš€ Tocho Prime - Iniciando aplicaciÃ³n...');
      console.log('ğŸ“± User Agent:', navigator.userAgent);
      console.log('ğŸ• Hora de carga:', new Date().toISOString());
    </script>
  </body>
</html>
